@namespace Views

@using Node = CleanTimer.ViewModel.HouseholdChoreNode

<div class="householdDeals">
    @if (Node.Children.Count == 0)
    {
        <Controls.Button Icon="@UI.Controls.Icon.Text.REFRESH"
                         Variant="@UI.Controls.Button.Variant.PRIMARY"
                         Size="@UI.Controls.Button.Size.XS" />
    }
    else
    {
        <Controls.Button Icon="@UI.Controls.Icon.Text.CHEVRON_RIGHT"
                         Variant="@UI.Controls.Button.Variant.SECONDARY"
                         Size="@UI.Controls.Button.Size.XS"
                         OnClick="() => isChildrenToggled = !isChildrenToggled" />
    }

    <Controls.Text Value="@Node.Name" Size="@UI.Controls.Text.Size.SM" />
    <div />
    <Controls.ProgressBar Value="@Node.PercentProgress" />
</div>


@if (Node.Children.Count > 0 && isChildrenToggled)
{
    <div class="children">
        @foreach (HouseholdChoreNode node in Node.Children)
        {
            <Views.HouseholdChore Node="@node" />
        }
    </div>
}

@code {
    [Parameter]
    public required Node Node { get; set; }

    private bool isChildrenToggled = false;
}
