@namespace Views.Chores.Mode.View

@using CleanTrack.Localization

<div class="chore">
	@if (Node.isLeaf)
	{
		<Controls.Button Icon="@UI.Controls.Icon.Text.REFRESH"
						 Variant="@UI.Controls.Button.Variant.PRIMARY"
						 Size="@UI.Controls.Button.Size.XS"
						 OnClick="() => OnResetChore.InvokeAsync(Node)" />
	}
	else
	{
		<Controls.Button Icon="@UI.Controls.Icon.Text.CHEVRON_RIGHT"
						 Variant="@UI.Controls.Button.Variant.SECONDARY"
						 Size="@UI.Controls.Button.Size.XS"
						 Disabled="@(Node.Children.Count == 0)"
						 OnClick="() => ToggledChanged.InvokeAsync(Node.Id)" />
	}

	<Controls.Text Value="@Node.Name" Size="@UI.Controls.Text.Size.SM" />
	<div />

	<div class="progressbar">
		<Controls.ProgressBar Value="@Node.PercentProgress" EmptyText="@Resources.msgProgressBarNaN" />
	</div>
</div>

@code {
	[Parameter]
	public required ChoreNode Node { get; set; }

	[Parameter]
	public EventCallback<ChoreNode> OnResetChore { get; set; }

	[Parameter]
	public EventCallback<Guid> ToggledChanged { get; set; }
}
